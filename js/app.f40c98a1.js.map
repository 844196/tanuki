{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?a518","webpack:///./src/App.vue","webpack:///node_modules/vue-sortable-tree/lib/index.vue","webpack:///./node_modules/vue-sortable-tree/lib/index.vue?5469","webpack:///./node_modules/vue-sortable-tree/lib/index.vue","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?ed4f","webpack:///./src/views/Home.vue?2744","webpack:///./src/router/routes.ts","webpack:///./src/router/index.ts","webpack:///./src/store/index.ts","webpack:///./src/main.ts"],"names":["vue_runtime_esm","use","lib_default","a","App","extend","App_render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","src_App","vue_sortable_tree_lib","String","Boolean","dragInfo","childrenAttr","child","_children","parentData","data","$parent","isMeOrMyAncestor","opts","length","preventDefault","$el","idx","afterParent","pastIdx","lib_render","staticClass","attrs","draggable","on","dragstart","$event","stopPropagation","dragStart","dragover","dragenter","dragEnter","dragleave","dragLeave","drop","dragend","dragEnd","_t","_v","_s","attr","item","hasChildren","closeStateKey","_l","index","key","class","parent-li","exist-li","blank-li","mixinParentKey","changePosition","scopedSlots","_u","fn","ref","_e","lib_staticRenderFns","injectStyle","context","__webpack_require__","lib___vue_template_functional__","lib___vue_styles__","lib___vue_scopeId__","lib___vue_module_identifier__","lib_Component","node_modules_vue_sortable_tree_lib","Data","name","point","children","fold","reduce","acc","totalPoint","push","target","findIndex","splice","str","concat","hasChild","toMarkdown","split","map","e","join","_ref","self","from","_data","Home_Data","Home","components","defineProperty_default","computed","dump","get","JSON","stringify","k","v","set","value","parse","Home_render","id","undefined","staticStyle","z-index","disabled","click","toggleFold","size","min","type","input","parseInt","model","callback","$$v","$set","expression","addChild","removeChild","readonly","Home_staticRenderFns","Home_injectStyle","Home___vue_template_functional__","Home___vue_styles__","Home___vue_scopeId__","Home___vue_module_identifier__","Home_Component","views_Home","routes","path","component","router_routes","vue_router_esm","router","mode","base","vuex_esm","store","Store","state","mutations","actions","config","productionTip","render","h","$mount"],"mappings":"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","file":"js/app.f40c98a1.js","sourcesContent":["<template>\n  <router-view />\n</template>\n\n<script>\nimport Vue from 'vue'\nimport Buefy from 'buefy'\nimport 'buefy/lib/buefy.css'\n\nVue.use(Buefy)\n\nexport default Vue.extend({\n  name: 'App'\n})\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view')}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e0fc678\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/m-takeda/.ghq/github.com/844196/tanuki/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/m-takeda/.ghq/github.com/844196/tanuki/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e0fc678\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n\t<div class=\"sortable-tree\" :draggable=\"draggable && parentData\" @dragstart.stop=\"dragStart($event)\" @dragover.stop.prevent @dragenter.stop.prevent=\"dragEnter()\"\n\t\t @dragleave.stop=\"dragLeave()\" @drop.stop.prevent=\"drop\" @dragend.stop.prevent=\"dragEnd\">\n\t\t<div class=\"content\">\n\t\t\t<slot :item=\"data\">\n\t\t\t\t<span>{{data[attr]}}</span>\n\t\t\t</slot>\n\t\t</div>\n\t\t<ul v-if=\"hasChildren(data) && (!this.closeStateKey || this.closeStateKey && !this.data[this.closeStateKey])\">\n\t\t\t<li v-for=\"(item, index) in children\" :class=\"{'parent-li': hasChildren(item), 'exist-li': !item['_replaceLi_'], 'blank-li': item['_replaceLi_']}\" :key=\"index\">\n\t\t\t\t<sortable-tree :data=\"item\" :attr=\"attr\" :childrenAttr=\"childrenAttr\" :mixinParentKey=\"mixinParentKey\" :closeStateKey=\"closeStateKey\" :draggable=\"draggable\"\n\t\t\t\t\t\t\t   :parentData=\"data\" :idx=\"index\" :dragInfo=\"dragInfo\" @changePosition=\"changePosition\">\n\t\t\t\t\t<!--slot scope only support vue 2.5+ -->\n\t\t\t\t\t<!--<template slot-scope=\"{item: item}\">-->\n\t\t\t\t\t<template slot-scope=\"{item: item}\">\n\t\t\t\t\t\t<slot :item=\"item\">\n\t\t\t\t\t\t\t<span>{{item[attr]}}</span>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</template>\n\t\t\t\t</sortable-tree>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</template>\n\n<script>\n    import Vue from 'vue'\n    export default {\n        name: 'SortableTree',\n        props: {\n            data: {\n                type: Object\n            },\n            attr: {\n                type: String,\n                default: 'name'\n            },\n            closeStateKey: {\n                type: String,\n                default: ''\n            },\n            childrenAttr: {\n                type: String,\n                default: 'children'\n            },\n            mixinParentKey: {\n                type: String,\n                default: ''\n            },\n            draggable: {\n                type: Boolean,\n                default: true\n            },\n            // inner used from here\n            parentData: {\n                type: Object\n            },\n            idx: {\n                type: Number, // v-for 的索引，用于相邻节点的判别\n                default: -1\n            },\n            dragInfo: {\n                type: Object,\n                default: () => {\n                    return {\n                        data: null, // vm 的数据\n                        vm: null, // 被拖动组件\n                        vmIdx: -1,\n                        parentData: null // vm 的容器数据\n                    }\n                }\n            }\n        },\n        data () {\n            return {\n                dragObj: this.dragInfo\n            }\n        },\n        computed: {\n            children () {\n                // 举例：原本是 [N1, N2, N3]\n                let children = this.data[this.childrenAttr]\n                if (!children || !children.length) return []\n\n                let _children = []\n                children.forEach(child => _children.push({_replaceLi_: true}, child))\n                _children.push({_replaceLi_: true})\n\n                // 最后生成 [E1, N1, E2, N2, E3, N3, E4]（其中 N 表示节点，E 表示空节点）\n                return _children\n            },\n            isParent () { // 拖放限制 1：判断“我”是否为被拖动节点的父节点\n                return this.data === this.dragObj.parentData\n            },\n            isNextToMe () { // 拖放限制 2：判断“我”是否为被拖动节点的相邻节点\n                return this.parentData === this.dragObj.parentData && Math.abs(this.idx - this.dragObj.vmIdx) === 1\n            },\n            isMeOrMyAncestor () { // 判断被拖动节点是否为“我”自身或“我”的祖先\n                // let data = this.data\n                let parent = this\n                while (parent) {\n                    let data = parent.data\n                    if (data === this.dragObj.data) {\n                        return true\n                    }\n                    parent = parent.$parent\n                }\n                return false\n            },\n            isAllowToDrop () { // 上述拖放限制条件的综合\n                return !(this.isNextToMe || this.isParent || this.isMeOrMyAncestor)\n            }\n        },\n        methods: {\n            changePosition (opts) {\n                this.$emit('changePosition', opts)\n            },\n            hasChildren (item) {\n                return item[this.childrenAttr] && item[this.childrenAttr].length\n            },\n            dragStart (event) { // 被拖动元素\n                if (this.data['_replaceLi_']) { // 空元素不允许拖动\n                    return event.preventDefault()\n                }\n                // support firfox ..\n                event.dataTransfer.setData('text/plain', null)\n\n                this.dragObj.data = this.data\n                this.dragObj.vm = this.$el\n                this.dragObj.vmIdx = this.idx\n                this.dragObj.parentData = this.parentData\n                this.dragObj.pastIdx = (this.idx - 1) / 2\n            },\n            dragEnter () { // 作用在目标元素\n                this.dragObj.vm && this.dragObj.vm.classList.add('draging')\n                if (!this.isAllowToDrop) return\n                this.$el && this.$el.classList.add('droper')\n            },\n            dragLeave (data) { // 作用在目标元素\n                this.$el && this.$el.classList.remove('droper')\n            },\n            // 在ondragover中一定要执行preventDefault()，否则ondrop事件不会被触发。\n            drop () { // 目标元素\n                this.dragObj.vm && this.dragObj.vm.classList.remove('draging')\n                this.$el && this.$el.classList.remove('droper')\n                if (!this.isAllowToDrop) return\n                // 无论如何都直接删除被拖动节点\n                let index = this.dragObj.parentData[this.childrenAttr].indexOf(this.dragObj.data)\n                this.dragObj.parentData[this.childrenAttr].splice(index, 1)\n                // 拖入空节点，成其兄弟（使用 splice 插入节点）\n                let afterParent = this.parentData\n                if (this.data['_replaceLi_']) {\n                    if (this.dragObj.parentData === this.parentData) {\n                        let changedIdx = this.idx / 2\n                        if (index > changedIdx) {\n                            this.parentData[this.childrenAttr].splice(changedIdx, 0, this.dragObj.data)\n                        } else {\n                            this.parentData[this.childrenAttr].splice(changedIdx - 1, 0, this.dragObj.data)\n                        }\n                    } else {\n                        this.parentData[this.childrenAttr].splice(this.idx / 2, 0, this.dragObj.data)\n                    }\n                } else {\n                    afterParent = this.data\n                    // 拖入普通节点，成为其子\n                    if (!this.data[this.childrenAttr]) {\n                        Vue.set(this.data, [this.childrenAttr], [])\n                    } // 须用 $set 引入双向绑定\n                    this.data[this.childrenAttr].push(this.dragObj.data)\n                }\n                this.$emit('changePosition', {\n                    beforeParent: this.dragObj.parentData,\n                    data: this.dragObj.data,\n                    afterParent: afterParent,\n                    beforeIndex: this.dragObj.pastIdx\n                })\n            },\n            dragEnd () {\n            }\n        },\n        updated () {\n            if (this.mixinParentKey) {\n                this.data[this.mixinParentKey] = this.parentData\n            }\n        },\n        mounted () {\n            if (this.mixinParentKey) {\n                this.data[this.mixinParentKey] = this.parentData\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\t$content-height: 30px;\n\t$blank-li-height: 5px;\n\n\t.sortable-tree {\n\t\tfont-size: 16px;\n\t\tmin-height: $blank-li-height;\n\n\t\t.content {\n\t\t\theight: $content-height;\n\t\t\tline-height: $content-height;\n\t\t\tuser-select:none;\n\t\t}\n\n\t\t.blank-li {\n\t\t\t.content {\n\t\t\t\twidth: 0;\n\t\t\t\theight: 0;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\t\t}\n\n\t\tul, li {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\tul {\n\t\t\tposition: relative;\n\t\t\tdisplay: list-item;\n\t\t\tlist-style: none;\n\t\t\t&:empty {\n\t\t\t\twidth: 0;\n\t\t\t\theight: 0;\n\t\t\t}\n\t\t}\n\n\t\tli {\n\t\t\tposition: relative;\n\t\t\tpadding-left: 24px;\n\t\t}\n\t}\n\t/* 位置相关 */\n\t.sortable-tree {\n\t\tli {\n\t\t\tposition: relative;\n\n\t\t\t&:before, &:after {\n\t\t\t\tposition: absolute;\n\t\t\t\tcontent: '';\n\t\t\t}\n\t\t\t&:before {\n\t\t\t\twidth: 24px;\n\t\t\t\theight: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\ttop: $content-height / -2;\n\t\t\t\t/*background: red;*/\n\t\t\t\tborder-left: 1px solid #999;\n\t\t\t}\n\t\t\t&:after {\n\t\t\t\twidth: 24px;\n\t\t\t\theight: $content-height;\n\t\t\t\ttop: $content-height / 2;\n\t\t\t\tleft: 0;\n\t\t\t\tborder-top: 1px solid #999;\n\t\t\t}\n\n\t\t\t&.parent-li:nth-last-child(2):before {\n\t\t\t\twidth: 24px;\n\t\t\t\theight: $content-height; // 32为1个li的高度\n\t\t\t\tleft: 0;\n\t\t\t\ttop: $content-height / -2;\n\t\t\t\tborder-left: 1px solid #999;\n\t\t\t}\n\t\t\t&.blank-li{\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: $blank-li-height;\n\n\t\t\t\t&:after {\n\t\t\t\t\twidth: 0;\n\t\t\t\t}\n\n\t\t\t\t&:last-child {\n\t\t\t\t\theight: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// 拖动相关\n\t.draging {\n\t\tbackground: #EFEEEF;\n\t}\n\t.droper {\n\t\tbackground: lightgreen;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// node_modules/vue-sortable-tree/lib/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sortable-tree\",attrs:{\"draggable\":_vm.draggable && _vm.parentData},on:{\"dragstart\":function($event){$event.stopPropagation();_vm.dragStart($event)},\"dragover\":function($event){$event.stopPropagation();$event.preventDefault();},\"dragenter\":function($event){$event.stopPropagation();$event.preventDefault();_vm.dragEnter()},\"dragleave\":function($event){$event.stopPropagation();_vm.dragLeave()},\"drop\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.drop($event)},\"dragend\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.dragEnd($event)}}},[_c('div',{staticClass:\"content\"},[_vm._t(\"default\",[_c('span',[_vm._v(_vm._s(_vm.data[_vm.attr]))])],{item:_vm.data})],2),(_vm.hasChildren(_vm.data) && (!this.closeStateKey || this.closeStateKey && !this.data[this.closeStateKey]))?_c('ul',_vm._l((_vm.children),function(item,index){return _c('li',{key:index,class:{'parent-li': _vm.hasChildren(item), 'exist-li': !item['_replaceLi_'], 'blank-li': item['_replaceLi_']}},[_c('sortable-tree',{attrs:{\"data\":item,\"attr\":_vm.attr,\"childrenAttr\":_vm.childrenAttr,\"mixinParentKey\":_vm.mixinParentKey,\"closeStateKey\":_vm.closeStateKey,\"draggable\":_vm.draggable,\"parentData\":_vm.data,\"idx\":index,\"dragInfo\":_vm.dragInfo},on:{\"changePosition\":_vm.changePosition},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._t(\"default\",[_c('span',[_vm._v(_vm._s(item[_vm.attr]))])],{item:item})]}}])})],1)})):_vm._e()])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ff28e532\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/vue-sortable-tree/lib/index.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ff28e532\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../../vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/m-takeda/.ghq/github.com/844196/tanuki/node_modules/.cache/cache-loader\\\"}!babel-loader!../../vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/m-takeda/.ghq/github.com/844196/tanuki/node_modules/.cache/cache-loader\\\"}!babel-loader!../../vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ff28e532\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ff28e532\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-sortable-tree/lib/index.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport SortableTree from 'vue-sortable-tree'\n\ninterface RawData {\n  name: string\n  point: number\n  children: Array<RawData>\n  fold: boolean\n}\n\nclass Data {\n  public name = ''\n  public point = 10\n  public children: Array<Data> = []\n  public fold = false\n\n  toggleFold (): void {\n    this.fold = !this.fold\n  }\n\n  hasChild (): boolean {\n    return this.children.length > 0\n  }\n\n  totalPoint (): number {\n    if (this.children.length === 0) {\n      return this.point\n    }\n    return this.children.reduce((acc, child) => {\n      acc += child.totalPoint()\n      return acc\n    }, 0)\n  }\n\n  addChild (): void {\n    this.children.push(new Data())\n  }\n\n  removeChild (target: Data): void {\n    const idx = this.children.findIndex(child => child === target)\n    this.children.splice(idx, 1)\n  }\n\n  static from ({ name, point, children, fold }: RawData): Data {\n    const self = new Data()\n    self.name = name\n    self.point = point\n    self.children = children.map(child => Data.from(child))\n    self.fold = fold\n    return self\n  }\n\n  toMarkdown (): string {\n    let str = `* ${this.name}: ${this.totalPoint()}人日`\n    if (this.hasChild()) {\n      str += this.children\n        .reduce((acc, child) => {\n          acc = `${acc}\\n${child.toMarkdown()}`\n          return acc\n        }, '')\n        .split('\\n')\n        .map(e => '    ' + e)\n        .join('\\n')\n    }\n    return str\n  }\n}\n\nconst data = new Data()\n\nexport default Vue.extend({\n  name: 'Home',\n  components: {\n    [SortableTree.name]: SortableTree\n  },\n  data () {\n    return {\n      data\n    }\n  },\n  computed: {\n    dump: {\n      get (): string {\n        return JSON.stringify(this.data, (k, v) => {\n          if (k === '$parent') {\n            return undefined\n          }\n          return v\n        }, '  ')\n      },\n      set (value: string): void {\n        this.data = Data.from(JSON.parse(value))\n      }\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/views/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"container\",attrs:{\"id\":\"main\"}},[_c('sortable-tree',{attrs:{\"data\":_vm.data,\"childrenAttr\":\"children\",\"mixinParentKey\":\"$parent\",\"closeStateKey\":\"fold\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.name !== undefined)?_c('div',{staticClass:\"item\"},[_c('b-field',[(item.hasChild())?_c('p',{staticClass:\"control\",staticStyle:{\"z-index\":\"1\"}},[_c('button',{staticClass:\"button is-small\",attrs:{\"disabled\":!item.hasChild()},on:{\"click\":function($event){item.toggleFold()}}},[_vm._v(_vm._s(item.fold ? '▶' : '▼'))])]):_vm._e(),(item.hasChild())?_c('p',{staticClass:\"control\"},[_c('span',{staticClass:\"button is-small is-static\"},[_vm._v(_vm._s(item.totalPoint())+\"人日\")])]):_vm._e(),(!item.hasChild())?_c('b-input',{attrs:{\"size\":\"is-small\",\"min\":\"0\",\"type\":\"number\",\"value\":item.hasChild() ? item.totalPoint() : item.point,\"disabled\":item.hasChild()},on:{\"input\":function($event){item.point = parseInt($event)}}}):_vm._e(),(!item.hasChild())?_c('p',{staticClass:\"control\"},[_c('span',{staticClass:\"button is-small is-static\"},[_vm._v(\"人日\")])]):_vm._e(),_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"text\"},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}}),_c('p',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-small is-info\",on:{\"click\":function($event){item.addChild()}}},[_vm._v(\"+\")])]),_c('p',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-small is-warning\",on:{\"click\":function($event){item.$parent.removeChild(item)}}},[_vm._v(\"×\")])])],1)],1):_vm._e()]}}])}),_c('hr'),_c('div',[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"textarea\"},model:{value:(_vm.dump),callback:function ($$v) {_vm.dump=$$v},expression:\"dump\"}})],1),_c('hr'),_c('div',[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"textarea\",\"readonly\":\"\"},model:{value:(_vm.data.toMarkdown()),callback:function ($$v) {_vm.$set(_vm.data, \"toMarkdown()\", $$v)},expression:\"data.toMarkdown()\"}})],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ed8eeae\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug&optionsId=0!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0ed8eeae\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/m-takeda/.ghq/github.com/844196/tanuki/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/m-takeda/.ghq/github.com/844196/tanuki/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ed8eeae\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug&optionsId=0!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0ed8eeae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Home.vue\n// module id = null\n// module chunks = ","import { RouteConfig } from 'vue-router'\nimport Home from '@/views/Home.vue'\n\nconst routes: RouteConfig[] = [\n  {\n    path: '/',\n    component: Home\n  }\n]\n\nexport default routes\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader??ref--18-0!./src/router/routes.ts","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport routes from './routes'\n\nVue.use(VueRouter)\n\nexport default new VueRouter({\n  mode: 'hash',\n  base: '/tanuki/',\n  routes\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader??ref--18-0!./src/router/index.ts","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n\n  },\n  mutations: {\n\n  },\n  actions: {\n\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader??ref--18-0!./src/store/index.ts","import Vue from 'vue'\nimport App from '@/App.vue'\nimport router from '@/router'\nimport store from '@/store'\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader??ref--18-0!./src/main.ts"],"sourceRoot":""}